import{a as u,b as m}from"./chunk-WKT6HPDZ.js";import"./chunk-MNFCEEX3.js";import{a as x,b as w}from"./chunk-DWIDEIZV.js";import{d as b}from"./chunk-KDZQCYFP.js";(()=>{let s=()=>{let c=new Error("not implemented");return c.code="ENOSYS",c};if(!globalThis.fs){let c="";globalThis.fs={constants:{O_WRONLY:-1,O_RDWR:-1,O_CREAT:-1,O_TRUNC:-1,O_APPEND:-1,O_EXCL:-1},writeSync(l,i){c+=_.decode(i);let n=c.lastIndexOf(`
`);return n!=-1&&(console.log(c.substring(0,n)),c=c.substring(n+1)),i.length},write(l,i,n,r,y,d){if(n!==0||r!==i.length||y!==null){d(s());return}let v=this.writeSync(l,i);d(null,v)},chmod(l,i,n){n(s())},chown(l,i,n,r){r(s())},close(l,i){i(s())},fchmod(l,i,n){n(s())},fchown(l,i,n,r){r(s())},fstat(l,i){i(s())},fsync(l,i){i(null)},ftruncate(l,i,n){n(s())},lchown(l,i,n,r){r(s())},link(l,i,n){n(s())},lstat(l,i){i(s())},mkdir(l,i,n){n(s())},open(l,i,n,r){r(s())},read(l,i,n,r,y,d){d(s())},readdir(l,i){i(s())},readlink(l,i){i(s())},rename(l,i,n){n(s())},rmdir(l,i){i(s())},stat(l,i){i(s())},symlink(l,i,n){n(s())},truncate(l,i,n){n(s())},unlink(l,i){i(s())},utimes(l,i,n,r){r(s())}}}if(globalThis.process||(globalThis.process={getuid(){return-1},getgid(){return-1},geteuid(){return-1},getegid(){return-1},getgroups(){throw s()},pid:-1,ppid:-1,umask(){throw s()},cwd(){throw s()},chdir(){throw s()}}),!globalThis.crypto)throw new Error("globalThis.crypto is not available, polyfill required (crypto.getRandomValues only)");if(!globalThis.performance)throw new Error("globalThis.performance is not available, polyfill required (performance.now only)");if(!globalThis.TextEncoder)throw new Error("globalThis.TextEncoder is not available, polyfill required");if(!globalThis.TextDecoder)throw new Error("globalThis.TextDecoder is not available, polyfill required");let f=new TextEncoder("utf-8"),_=new TextDecoder("utf-8");globalThis.Go=class{constructor(){this.argv=["js"],this.env={},this.exit=e=>{e!==0&&console.warn("exit code:",e)},this._exitPromise=new Promise(e=>{this._resolveExitPromise=e}),this._pendingEvent=null,this._scheduledTimeouts=new Map,this._nextCallbackTimeoutID=1;let c=(e,t)=>{this.mem.setUint32(e+0,t,!0),this.mem.setUint32(e+4,Math.floor(t/4294967296),!0)},l=(e,t)=>{this.mem.setUint32(e+0,t,!0)},i=e=>{let t=this.mem.getUint32(e+0,!0),o=this.mem.getInt32(e+4,!0);return t+o*4294967296},n=e=>{let t=this.mem.getFloat64(e,!0);if(t===0)return;if(!isNaN(t))return t;let o=this.mem.getUint32(e,!0);return this._values[o]},r=(e,t)=>{if(typeof t=="number"&&t!==0){if(isNaN(t)){this.mem.setUint32(e+4,2146959360,!0),this.mem.setUint32(e,0,!0);return}this.mem.setFloat64(e,t,!0);return}if(t===void 0){this.mem.setFloat64(e,0,!0);return}let a=this._ids.get(t);a===void 0&&(a=this._idPool.pop(),a===void 0&&(a=this._values.length),this._values[a]=t,this._goRefCounts[a]=0,this._ids.set(t,a)),this._goRefCounts[a]++;let h=0;switch(typeof t){case"object":t!==null&&(h=1);break;case"string":h=2;break;case"symbol":h=3;break;case"function":h=4;break}this.mem.setUint32(e+4,2146959360|h,!0),this.mem.setUint32(e,a,!0)},y=e=>{let t=i(e+0),o=i(e+8);return new Uint8Array(this._inst.exports.mem.buffer,t,o)},d=e=>{let t=i(e+0),o=i(e+8),a=new Array(o);for(let h=0;h<o;h++)a[h]=n(t+h*8);return a},v=e=>{let t=i(e+0),o=i(e+8);return _.decode(new DataView(this._inst.exports.mem.buffer,t,o))},g=Date.now()-performance.now();this.importObject={_gotest:{add:(e,t)=>e+t},gojs:{"runtime.wasmExit":e=>{e>>>=0;let t=this.mem.getInt32(e+8,!0);this.exited=!0,delete this._inst,delete this._values,delete this._goRefCounts,delete this._ids,delete this._idPool,this.exit(t)},"runtime.wasmWrite":e=>{e>>>=0;let t=i(e+8),o=i(e+16),a=this.mem.getInt32(e+24,!0);fs.writeSync(t,new Uint8Array(this._inst.exports.mem.buffer,o,a))},"runtime.resetMemoryDataView":e=>{e>>>=0,this.mem=new DataView(this._inst.exports.mem.buffer)},"runtime.nanotime1":e=>{e>>>=0,c(e+8,(g+performance.now())*1e6)},"runtime.walltime":e=>{e>>>=0;let t=new Date().getTime();c(e+8,t/1e3),this.mem.setInt32(e+16,t%1e3*1e6,!0)},"runtime.scheduleTimeoutEvent":e=>{e>>>=0;let t=this._nextCallbackTimeoutID;this._nextCallbackTimeoutID++,this._scheduledTimeouts.set(t,setTimeout(()=>{for(this._resume();this._scheduledTimeouts.has(t);)console.warn("scheduleTimeoutEvent: missed timeout event"),this._resume()},i(e+8))),this.mem.setInt32(e+16,t,!0)},"runtime.clearTimeoutEvent":e=>{e>>>=0;let t=this.mem.getInt32(e+8,!0);clearTimeout(this._scheduledTimeouts.get(t)),this._scheduledTimeouts.delete(t)},"runtime.getRandomData":e=>{e>>>=0,crypto.getRandomValues(y(e+8))},"syscall/js.finalizeRef":e=>{e>>>=0;let t=this.mem.getUint32(e+8,!0);if(this._goRefCounts[t]--,this._goRefCounts[t]===0){let o=this._values[t];this._values[t]=null,this._ids.delete(o),this._idPool.push(t)}},"syscall/js.stringVal":e=>{e>>>=0,r(e+24,v(e+8))},"syscall/js.valueGet":e=>{e>>>=0;let t=Reflect.get(n(e+8),v(e+16));e=this._inst.exports.getsp()>>>0,r(e+32,t)},"syscall/js.valueSet":e=>{e>>>=0,Reflect.set(n(e+8),v(e+16),n(e+32))},"syscall/js.valueDelete":e=>{e>>>=0,Reflect.deleteProperty(n(e+8),v(e+16))},"syscall/js.valueIndex":e=>{e>>>=0,r(e+24,Reflect.get(n(e+8),i(e+16)))},"syscall/js.valueSetIndex":e=>{e>>>=0,Reflect.set(n(e+8),i(e+16),n(e+24))},"syscall/js.valueCall":e=>{e>>>=0;try{let t=n(e+8),o=Reflect.get(t,v(e+16)),a=d(e+32),h=Reflect.apply(o,t,a);e=this._inst.exports.getsp()>>>0,r(e+56,h),this.mem.setUint8(e+64,1)}catch(t){e=this._inst.exports.getsp()>>>0,r(e+56,t),this.mem.setUint8(e+64,0)}},"syscall/js.valueInvoke":e=>{e>>>=0;try{let t=n(e+8),o=d(e+16),a=Reflect.apply(t,void 0,o);e=this._inst.exports.getsp()>>>0,r(e+40,a),this.mem.setUint8(e+48,1)}catch(t){e=this._inst.exports.getsp()>>>0,r(e+40,t),this.mem.setUint8(e+48,0)}},"syscall/js.valueNew":e=>{e>>>=0;try{let t=n(e+8),o=d(e+16),a=Reflect.construct(t,o);e=this._inst.exports.getsp()>>>0,r(e+40,a),this.mem.setUint8(e+48,1)}catch(t){e=this._inst.exports.getsp()>>>0,r(e+40,t),this.mem.setUint8(e+48,0)}},"syscall/js.valueLength":e=>{e>>>=0,c(e+16,parseInt(n(e+8).length))},"syscall/js.valuePrepareString":e=>{e>>>=0;let t=f.encode(String(n(e+8)));r(e+16,t),c(e+24,t.length)},"syscall/js.valueLoadString":e=>{e>>>=0;let t=n(e+8);y(e+16).set(t)},"syscall/js.valueInstanceOf":e=>{e>>>=0,this.mem.setUint8(e+24,n(e+8)instanceof n(e+16)?1:0)},"syscall/js.copyBytesToGo":e=>{e>>>=0;let t=y(e+8),o=n(e+32);if(!(o instanceof Uint8Array||o instanceof Uint8ClampedArray)){this.mem.setUint8(e+48,0);return}let a=o.subarray(0,t.length);t.set(a),c(e+40,a.length),this.mem.setUint8(e+48,1)},"syscall/js.copyBytesToJS":e=>{e>>>=0;let t=n(e+8),o=y(e+16);if(!(t instanceof Uint8Array||t instanceof Uint8ClampedArray)){this.mem.setUint8(e+48,0);return}let a=o.subarray(0,t.length);t.set(a),c(e+40,a.length),this.mem.setUint8(e+48,1)},debug:e=>{console.log(e)}}}}async run(c){if(!(c instanceof WebAssembly.Instance))throw new Error("Go.run: WebAssembly.Instance expected");this._inst=c,this.mem=new DataView(this._inst.exports.mem.buffer),this._values=[NaN,0,null,!0,!1,globalThis,this],this._goRefCounts=new Array(this._values.length).fill(1/0),this._ids=new Map([[0,1],[null,2],[!0,3],[!1,4],[globalThis,5],[this,6]]),this._idPool=[],this.exited=!1;let l=4096,i=g=>{let e=l,t=f.encode(g+"\0");return new Uint8Array(this.mem.buffer,l,t.length).set(t),l+=t.length,l%8!==0&&(l+=8-l%8),e},n=this.argv.length,r=[];this.argv.forEach(g=>{r.push(i(g))}),r.push(0),Object.keys(this.env).sort().forEach(g=>{r.push(i(`${g}=${this.env[g]}`))}),r.push(0);let d=l;if(r.forEach(g=>{this.mem.setUint32(l,g,!0),this.mem.setUint32(l+4,0,!0),l+=8}),l>=12288)throw new Error("total length of command line and environment variables exceeds limit");this._inst.exports.run(n,d),this.exited&&this._resolveExitPromise(),await this._exitPromise}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(c){let l=this;return function(){let i={id:c,this:this,args:arguments};return l._pendingEvent=i,l._resume(),i.result}}}})();function T(s){let[f,_]=x({buy:null,sell:null,buyText:"\u306C\u308C\u305F\u5DFB\u7269,\u9AD8\u98DB\u3073\u8349[\u795D],\u304F\u306D\u304F\u306D\u8349[\u795D],\u3044\u3084\u3057\u8349,\u304B\u3050\u308F\u3057\u8349,\u80C3\u62E1\u5F35\u306E\u7A2E,\u80C3\u7E2E\u5C0F\u306E\u7A2E",sellText:"\u30C9\u30E9\u30B4\u30F3\u8349",isWasmReady:!1});return w(()=>{f.isWasmReady&&_({...f,buyText:f.buy(s.price.value).join(),sellText:f.sell(s.price.value).join()})},[s.price.value]),w(async()=>{let c=new Go,l=await WebAssembly.instantiate(s.wasm,c.importObject);c.run(l.instance),_({...f,buy,sell,isWasmReady:!0})},[]),u(b,{children:[u("div",{class:"flex gap-8 py-6",children:[u(m,{onClick:()=>s.price.value=s.price.value*10+1,children:"1"}),u(m,{onClick:()=>s.price.value=s.price.value*10+2,children:"2"}),u(m,{onClick:()=>s.price.value=s.price.value*10+3,children:"3"}),u(m,{onClick:()=>s.price.value=s.price.value*10+4,children:"4"}),u(m,{onClick:()=>s.price.value=s.price.value*10+5,children:"5"}),u(m,{onClick:()=>s.price.value=s.price.value*10+6,children:"6"}),u(m,{onClick:()=>s.price.value=s.price.value*10+7,children:"7"}),u(m,{onClick:()=>s.price.value=s.price.value*10+8,children:"8"}),u(m,{onClick:()=>s.price.value=s.price.value*10+9,children:"9"}),u(m,{onClick:()=>s.price.value=s.price.value*10+0,children:"0"}),u(m,{onClick:()=>s.price.value=0,children:"Clear"})]}),u("div",{class:"text-3xl tabular-nums",children:[s.price.value,"\u30AE\u30BF\u30F3"]}),u("div",{class:"flex gap-8 py-6",children:f.buyText}),u("div",{class:"flex gap-8 py-6",children:f.sellText})]})}export{T as default};
